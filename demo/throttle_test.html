<!DOCTYPE html>
<html ng-app="throttleTest">
  <head>
  <title></title>
</head>

<body >
</body>

<script type="text/javascript" src="/bower_components/angular/angular.js"></script>
<script type="text/javascript" src="/bower_components/angular-animate/angular-animate.js"></script>
<script type="text/javascript" src="/config/lib/angular-animate-sequence/angular-animate-sequence.js"></script>
<script type="text/javascript" src="/config/lib/angular-animate-sequence/angular-animate-stylers.js"></script>

<script src="/src/components/animate/effects.js"></script>
<script src="/src/components/animate/canvas/rippler.js"></script>

<script src="/src/utils/supplant.js"></script>
<script src="/src/utils/binding.js"></script>

<script src="/config/lib/angular-animate-sequence/angular-throttle.js"></script>

<script>

angular.module('throttleTest', ['ngThrottle'])
        .run(function( $log, $timeout, $throttle ){

            var th = $throttle(
                {
                    start : function start(done) {
                        $log.debug("start()");
                        done("done-start");
                    },
                    throttle :function throttle(data, done){

                        $timeout( function(){
                            $log.debug( "throttle( " + data +" )");
                            if ( data == "e" ) {
                                done("done-throttle");
                            }
                        },10,false);
                    },
                    end : function end(done) {

                        var procID = $timeout(function(){
                            $log.debug( "end()" );
                            done("done-end");

                        },500,false);

                        return function() {
                            $timeout.cancel( procID );
                        }
                    }
                }
            )( function(){
                $log.debug("done()");
            });


            th("a");
            th("b");
            th("c");
            th("d");
            th("e");
            $timeout(function(){
                th("a");
                th("e");
            },400,false);

        });
</script>
</html>
